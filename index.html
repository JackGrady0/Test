<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¥®æ–™ç›’åŒ…è£…è¡¨é¢ç§¯æ¢ç©¶ - äº¤äº’åŠ¨ç”»</title>
    <style>
        :root {
            /* å®šä¹‰åŸºç¡€å°ºå¯¸ï¼Œæ¯”ä¾‹ 1cm = 10px */
            --l: 90px;  /* 9cm */
            --w: 30px;  /* 3cm */
            --h: 120px; /* 12cm */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
            height: 100vh;
            box-sizing: border-box;
        }

        /* æ§åˆ¶é¢æ¿ */
        .controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 40px;
            text-align: center;
            z-index: 10;
            max-width: 800px;
            width: 100%;
        }

        h2 { margin-top: 0; color: #333; }
        
        .btn-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            background-color: #e0e0e0;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        button.active {
            background-color: #3b82f6;
            color: white;
            font-weight: bold;
        }

        button:hover:not(.active) {
            background-color: #d1d5db;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .stat-item strong {
            color: #3b82f6;
            font-size: 1.2em;
        }

        /* 3D åœºæ™¯å®¹å™¨ */
        .scene-container {
            width: 100%;
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px; /* é€è§†æ·±åº¦ */
            overflow: hidden;
        }

        .scene {
            position: relative;
            width: 0;
            height: 0;
            transform-style: preserve-3d;
            /* åˆå§‹è§†è§’ï¼šæ—‹è½¬ä¸€ä¸‹ä»¥ä¾¿çœ‹åˆ°ç«‹ä½“æ•ˆæœ */
            transform: rotateX(-20deg) rotateY(-30deg);
            transition: transform 1s ease;
        }

        /* å•ä¸ªç›’å­ */
        .box {
            position: absolute;
            width: var(--l);
            height: var(--h);
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            /* é»˜è®¤ä¸­å¿ƒç‚¹åœ¨å‡ ä½•ä¸­å¿ƒ */
            margin-left: calc(var(--l) / -2);
            margin-top: calc(var(--h) / -2);
        }

        /* ç›’å­çš„å…­ä¸ªé¢ */
        .face {
            position: absolute;
            border: 2px solid rgba(0,0,0,0.3);
            background: rgba(59, 130, 246, 0.8); /* é¥®æ–™ç›’é¢œè‰² */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
            font-weight: bold;
            backface-visibility: hidden;
        }

        /* é¢çš„å°ºå¯¸ä¸å˜æ¢ */
        .face.front  { width: var(--l); height: var(--h); transform: translateZ(calc(var(--w) / 2)); }
        .face.back   { width: var(--l); height: var(--h); transform: rotateY(180deg) translateZ(calc(var(--w) / 2)); }
        .face.right  { width: var(--w); height: var(--h); transform: rotateY(90deg) translateZ(calc(var(--l) / 2)); left: calc((var(--l) - var(--w))/2); }
        .face.left   { width: var(--w); height: var(--h); transform: rotateY(-90deg) translateZ(calc(var(--l) / 2)); left: calc((var(--l) - var(--w))/2); }
        .face.top    { width: var(--l); height: var(--w); transform: rotateX(90deg) translateZ(calc(var(--h) / 2)); top: calc((var(--h) - var(--w))/2); }
        .face.bottom { width: var(--l); height: var(--w); transform: rotateX(-90deg) translateZ(calc(var(--h) / 2)); top: calc((var(--h) - var(--w))/2); }

        /* ç»™ä¸åŒç›’å­ä¸€ç‚¹é¢œè‰²å·®å¼‚ï¼Œæ–¹ä¾¿åŒºåˆ† */
        .box:nth-child(1) .face { background: rgba(59, 130, 246, 0.85); }
        .box:nth-child(2) .face { background: rgba(37, 99, 235, 0.85); }
        .box:nth-child(3) .face { background: rgba(29, 78, 216, 0.85); }
        .box:nth-child(4) .face { background: rgba(30, 64, 175, 0.85); }
        
        .note {
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }
    </style>
</head>
<body>

    <div class="controls">
        <h2>ğŸ§ƒ 4ç›’é¥®æ–™åŒ…è£…æ–¹æ¡ˆæ¢ç©¶ (9cm Ã— 3cm Ã— 12cm)</h2>
        
        <div class="btn-group" id="btnGroup">
            </div>

        <div class="stats">
            <div class="stat-item">ç»„åˆå°ºå¯¸: <span id="dims-display">--</span></div>
            <div class="stat-item">æ€»è¡¨é¢ç§¯: <strong id="area-display">--</strong> cmÂ²</div>
            <div class="stat-item">å‡å°‘é¢ç§¯: <span id="saved-display">--</span> cmÂ²</div>
        </div>
        <div class="note">å•ç›’è¡¨é¢ç§¯: 342 cmÂ² | 4ç›’åˆ†æ•£æ€»é¢ç§¯: 1368 cmÂ²</div>
    </div>

    <div class="scene-container">
        <div class="scene" id="scene">
            <div class="box" id="box1"><div class="face front"></div><div class="face back"></div><div class="face right"></div><div class="face left"></div><div class="face top"></div><div class="face bottom"></div></div>
            <div class="box" id="box2"><div class="face front"></div><div class="face back"></div><div class="face right"></div><div class="face left"></div><div class="face top"></div><div class="face bottom"></div></div>
            <div class="box" id="box3"><div class="face front"></div><div class="face back"></div><div class="face right"></div><div class="face left"></div><div class="face top"></div><div class="face bottom"></div></div>
            <div class="box" id="box4"><div class="face front"></div><div class="face back"></div><div class="face right"></div><div class="face left"></div><div class="face top"></div><div class="face bottom"></div></div>
        </div>
    </div>

    <script>
        // åŸºç¡€å‚æ•° (cm)
        const L = 9, W = 3, H = 12;
        const BOX_AREA = 2 * (L*W + L*H + W*H); // 342
        const TOTAL_SINGLE_AREA = 4 * BOX_AREA; // 1368

        // CSS åƒç´ ç¼©æ”¾æ¯”ä¾‹ (éœ€è¦ä¸CSSä¸­çš„ --l, --w, --h ä¿æŒä¸€è‡´)
        const SCALE = 10; 

        // å®šä¹‰6ç§ç»„åˆæ–¹å¼
        // grid: [xè½´æ•°é‡, yè½´æ•°é‡, zè½´æ•°é‡] (å¯¹åº” é•¿, é«˜, å®½ æ–¹å‘)
        // æ³¨æ„ï¼šCSS 3Dåæ ‡ç³»ä¸­ï¼ŒYæ˜¯å‘ä¸‹(é«˜)ï¼ŒXæ˜¯å‘å³(é•¿)ï¼ŒZæ˜¯å‘å±å¹•å¤–(å®½)
        const configs = [
            { 
                name: "æ–¹æ¡ˆ 1: é‡å æœ€å¤§é¢ (2Ã—2)", 
                desc: "æœ€çœåŒ…è£…çº¸",
                grid: [1, 2, 2], // 1æ’é•¿, 2å±‚é«˜, 2æ’å®½
                math: { l: L, h: H*2, w: W*2 } 
            },
            { 
                name: "æ–¹æ¡ˆ 2: å¹³é“ºä¸€å±‚ (2Ã—2)", 
                desc: "æ‰å¹³åŒ…è£…",
                grid: [2, 1, 2], // 2æ’é•¿, 1å±‚é«˜, 2æ’å®½
                math: { l: L*2, h: H, w: W*2 }
            },
            { 
                name: "æ–¹æ¡ˆ 3: ç«–ç«‹ä¸€æ’ (4Ã—1)", 
                desc: "ç»†é•¿æ¡",
                grid: [4, 1, 1], // 4æ’é•¿
                math: { l: L*4, h: H, w: W }
            },
            { 
                name: "æ–¹æ¡ˆ 4: ä¾§ç«‹ä¸€æ’ (1Ã—4)", 
                desc: "å®½æ‰æ’",
                grid: [1, 1, 4], // 4æ’å®½
                math: { l: L, h: H, w: W*4 }
            },
            { 
                name: "æ–¹æ¡ˆ 5: å æˆé«˜å¡” (1Ã—1)", 
                desc: "æä¸ç¨³å®š",
                grid: [1, 4, 1], // 4å±‚é«˜
                math: { l: L, h: H*4, w: W }
            },
            { 
                name: "æ–¹æ¡ˆ 6: å¢™çŠ¶å †å  (2Ã—2)", 
                desc: "é‡å ä¸­ç­‰é¢",
                grid: [2, 2, 1], // 2æ’é•¿, 2å±‚é«˜
                math: { l: L*2, h: H*2, w: W }
            }
        ];

        const boxes = document.querySelectorAll('.box');
        const btnGroup = document.getElementById('btnGroup');
        const displayDims = document.getElementById('dims-display');
        const displayArea = document.getElementById('area-display');
        const displaySaved = document.getElementById('saved-display');
        const scene = document.getElementById('scene');

        // åˆå§‹åŒ–æŒ‰é’®
        configs.forEach((conf, index) => {
            const btn = document.createElement('button');
            btn.innerText = conf.name;
            btn.onclick = () => applyConfig(index);
            if (index === 0) btn.classList.add('active');
            btnGroup.appendChild(btn);
        });

        function calculateSurfaceArea(l, w, h) {
            return 2 * (l*w + l*h + w*h);
        }

        function applyConfig(index) {
            // æ›´æ–°UIçŠ¶æ€
            document.querySelectorAll('button').forEach((b, i) => {
                b.classList.toggle('active', i === index);
            });

            const config = configs[index];
            const g = config.grid; // [nx, ny, nz] -> [cols, rows, layers]
            
            // è®¡ç®—å½“å‰ç»„åˆçš„å®é™…ç‰©ç†å°ºå¯¸
            const totalL = config.math.l;
            const totalH = config.math.h;
            const totalW = config.math.w;

            const currentArea = calculateSurfaceArea(totalL, totalW, totalH);
            
            // æ›´æ–°æ•°æ®æ˜¾ç¤º
            displayDims.innerText = `${totalL} Ã— ${totalW} Ã— ${totalH} (cm)`;
            displayArea.innerText = currentArea;
            displaySaved.innerText = TOTAL_SINGLE_AREA - currentArea;

            // é‡æ–°æ’åˆ—ç›’å­åŠ¨ç”»
            // æˆ‘ä»¬éœ€è¦è®¡ç®—æ¯ä¸ªç›’å­åœ¨3Dç©ºé—´ä¸­çš„ä¸­å¿ƒç‚¹åæ ‡
            // æ•´ä¸ªç»„åˆçš„ä¸­å¿ƒç‚¹åº”è¯¥åœ¨ (0,0,0)
            
            let boxIndex = 0;
            
            // åŸºç¡€åç§»é‡ (åŠä¸ªå°ºå¯¸)
            const unitL = L * SCALE;
            const unitH = H * SCALE;
            const unitW = W * SCALE;

            // è®¡ç®—èµ·å§‹åç§»ï¼Œä½¿å¾—æ•´ä½“å±…ä¸­
            // å¦‚æœ xè½´æœ‰2ä¸ªç›’å­ï¼Œæ€»å®½æ˜¯ 2*unitLï¼Œèµ·å§‹ç‚¹åº”è¯¥æ˜¯ -unitL + 0.5*unitL
            const startX = -((g[0] * unitL) / 2) + (unitL / 2);
            const startY = -((g[1] * unitH) / 2) + (unitH / 2);
            const startZ = -((g[2] * unitW) / 2) + (unitW / 2);

            for (let x = 0; x < g[0]; x++) {
                for (let y = 0; y < g[1]; y++) {
                    for (let z = 0; z < g[2]; z++) {
                        if (boxIndex >= 4) break;

                        const b = boxes[boxIndex];
                        
                        // è®¡ç®—ä½ç§»
                        const posX = startX + (x * unitL);
                        const posY = startY + (y * unitH);
                        // Zè½´æ­£æ–¹å‘ä¹Ÿæ˜¯éœ€è¦å åŠ çš„ (æ³¨æ„CSS Zè½´æ–¹å‘)
                        // CSS translateZ: æ­£å€¼ç¦»è§‚ä¼—è¿‘ã€‚æˆ‘ä»¬è¿™é‡Œå †å ï¼Œå‡è®¾Zå¢åŠ æ˜¯å‘åå †å (ä¸ºäº†æ–¹ä¾¿è®¡ç®—å¯ä»¥æ˜¯è´Ÿ)
                        // æˆ–è€…ç®€å•ç‚¹ï¼Œé—´éš”æ’åˆ—
                        const posZ = startZ + (z * unitW); 

                        b.style.transform = `translate3d(${posX}px, ${posY}px, ${posZ}px)`;
                        
                        boxIndex++;
                    }
                }
            }
        }

        // é¼ æ ‡æ‹–åŠ¨æ—‹è½¬åœºæ™¯
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        let rotation = { x: -20, y: -30 };

        document.addEventListener('mousedown', (e) => {
            isDragging = true;
            previousMousePosition = { x: e.clientX, y: e.clientY };
        });

        document.addEventListener('mouseup', () => isDragging = false);

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const deltaMove = {
                x: e.clientX - previousMousePosition.x,
                y: e.clientY - previousMousePosition.y
            };
            
            rotation.y += deltaMove.x * 0.5;
            rotation.x -= deltaMove.y * 0.5;

            scene.style.transform = `rotateX(${rotation.x}deg) rotateY(${rotation.y}deg)`;
            previousMousePosition = { x: e.clientX, y: e.clientY };
        });

        // åˆå§‹åŒ–
        applyConfig(0);

    </script>
</body>
</html>